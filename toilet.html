<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>

		<title>Toilet</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

		<style type="text/css">
			<!--
			body { 
				margin-left:	75;
				margin-right:	75;
				font-family:	Verdana,Arial,sans-serif;
				font-size:	smaller;
			}

			pre {
				color:			#000000;
				background-color:	#E6E6E6;
				border-style:		dashed;
				border-width:		thin;
				padding:		10;
				font-family:		"Courier New", Courier, mono;
			}
			-->
		</style>
		</head>
<body>
<h2>TOILET </h2>
<h4>Named in anticipation of writing "The TOILET Paper" </h4>

<p>
<strong>Rows</strong>
<ul>
	<li>basic data structure represented as a multi hash map</li>
	<li>indexed by a string representing the column name</li>
	<li>row["column"] returns an iterator over the possibly many values</li>
	<li>every row has a globally unique id across multiple gtables</li> 
</ul>
</p>

<p>
<strong>Gtable - "Generalized Table"</strong>
<ul>
	<li>contains rows</li>
	<li>knows about every column name in any of its rows</li>
	<li>sparse in the sense that not every row has the same columns</li>
	<li>columns can be indexed, indices are stored as hashes and/or trees</li>
	<li>the id column is automatically generated</li>
	<li>id can be used like "foreign keys" in any row</li>
</ul>

</p>


<pre>
	Gtable toilet;
	Row a, b, c;
	a["name"] = apple;
	a["baked_good"] = pie;
	a["price"] = 0.53;

	b["name"] = banana;
	b["baked_good"] = bread;
	b["baked_good"] = muffin;
	
	c["name"] = cantaloupe;
	c["price"] = 1.00;

	toilet.insert(a);
	toilet.insert(b);
	toilet.insert(c);

</pre>

<table border="1">
<caption><em>The gtable looks like</em></caption>
<tr><th>id <th>name      <th colspan=2>baked_good  <th>price
<tr><td>1  <td>apple     <td colspan=2>pie	   <td>0.53
<tr><td>2  <td>banana    <td>bread<td>muffin       <td>
<tr><td>3  <td>cantaloupe<td colspan=2>		   <td>1.00
</table>
<br/>
<strong>Querying</strong>
<p>
	A simple query can be gtable.get_row(id). We still haven't thought of a nice way to 
	query the columns of a gtable. We would like to use the query system to help give 
	performance hints to the column indexes.
</p>
More to come...
</body>
</html>
